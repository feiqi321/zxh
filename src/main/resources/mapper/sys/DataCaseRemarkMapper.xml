<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="xyz.zaijushou.zhx.sys.dao.DataCaseRemarkMapper">

    <update id="deleteCaseRemarkBatchByCaseIds" parameterType="xyz.zaijushou.zhx.sys.entity.DataCaseRemarkEntity">
        update data_case_remark
        set delete_flag = 1,
            update_user = #{updateUser.id}
        where delete_flag = 0
        and case_id in
        <foreach collection="caseIdsSet" open="(" close=")" separator="," item="item">
            #{item}
        </foreach>
    </update>

    <insert id="insertCaseRemarkBatch" parameterType="xyz.zaijushou.zhx.sys.entity.DataCaseEntity">
        insert into data_case_contact
            (
             case_id,
             remark,
             create_user,
             update_user
            )
            values
            <foreach collection="caseRemarks" open="(" close=")" separator="," item="item">
                #{item.caseId},
                #{item.remark},
                #{createUser.id},
                #{updateUser.id}
            </foreach>
    </insert>

</mapper>